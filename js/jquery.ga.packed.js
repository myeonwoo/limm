/*  gaTracker 1.0.1: jQuery Google Analytics Integration 
  A quicker, automated way to embed Google Analytics.
  (c)2007 Jason Huck/Core Five Creative
  Slightly modified by Wallop Creative
*/
(function($){$.gaTracker=function(code,opts){opts=jQuery.extend({external:'/external/',mailto:'/mailtos/',download:'/downloads/',extensions:['pdf','doc','xls','csv','jpg','gif','mp3','swf','txt','ppt','zip','gz','dmg','xml','js']},opts);function decorateLink(u){var trackingURL='';if(u.indexOf('://')==-1&&u.indexOf('mailto:')!=0){var ext=u.split('.')[u.split('.').length-1];var exts=opts.extensions;for(i=0;i<exts.length;i++){if(ext==exts[i]){trackingURL=opts.download+u;break}}}else{if(u.indexOf('mailto:')==0){trackingURL=opts.mailto+u.substring(7)}else{var regex=/([^:\/]+)*(?::\/\/)*([^:\/]+)(:[0-9]+)*\/?/i;var linkparts=regex.exec(u);var urlparts=regex.exec(location.href);if(linkparts[2]!=urlparts[2])trackingURL=opts.external+u}}return trackingURL}function addTracking(){$.pageTracker=_gat._getTracker(code);$.pageTracker._initData();$.pageTracker._trackPageview();if(opts.domain){$.pageTracker._setDomainName(opts.domain)}if(opts.allowLinker){$.pageTracker._setAllowLinker(true)}$('a').each(function(){var u=$(this).attr('href');if(typeof(u)!='undefined'){var newLink=decorateLink(u);if(newLink.length){$(this).click(function(){if($(this).hasClass('galinker')&&opts.allowLinker){this.target='';$.pageTracker._link(this.href)}else{$.pageTracker._trackPageview(newLink)}})}}})}function initGA(){try{var gaURL=(location.href.indexOf('https')==0?'https://ssl':'http://www');gaURL+='.google-analytics.com/ga.js';$.getScript(gaURL,function(){$(document).ready(function(){addTracking()})})}catch(err){console.log('Failed to load Google Analytics:'+err)}}initGA()}})(jQuery);